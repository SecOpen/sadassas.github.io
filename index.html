<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>гой baze</title>
<style>
  :root {
    --bg-color: #121212;
    --text-color: #e0e0e0;
    --accent-color: #00bcd4;
    --card-bg: #1e1e1e;
    --shadow: rgba(0, 0, 0, 0.4);
  }
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    background: var(--bg-color);
    color: var(--text-color);
    font-family: 'Segoe UI', sans-serif;
    padding: 40px;
  }
  h1 {
    text-align: center;
    color: var(--accent-color);
    margin-bottom: 30px;
  }
  #posts-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }
  .post {
    background: var(--card-bg);
    padding: 15px;
    border-radius: 10px;
    width: 300px;
    box-shadow: 0 0 10px var(--shadow);
    cursor: pointer;
    transition: transform 0.3s ease;
    text-align: center;
  }
  .post:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px var(--accent-color);
  }
  .post-title {
    font-size: 1.1em;
    margin-bottom: 10px;
  }
  /* Модальное окно */
  #overlay {
    display: none;
    position: fixed;
    top:0; left:0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.7);
    z-index: 1000;
  }
  #modal {
    display: none;
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 80vw;
    height: 80vh;
    background: var(--card-bg);
    border-radius: 15px;
    box-shadow: 0 0 20px var(--shadow);
    z-index: 1001;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  #modal iframe {
    flex-grow: 1;
    border: none;
    border-radius: 0 0 15px 15px;
  }
  #modal-header {
    padding: 10px;
    background: #222;
    color: var(--text-color);
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 15px 15px 0 0;
  }
  #modal-close {
    cursor: pointer;
    background: var(--accent-color);
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    color: white;
    font-weight: bold;
  }
  #modal-close:hover {
    background: #0097a7;
  }
</style>
</head>
<body>

<h1>гой baze</h1>

<div id="posts-container">
  <!-- Посты будут тут -->
</div>

<div id="overlay"></div>

<div id="modal">
  <div id="modal-header">
    <div id="modal-title">Telegraph</div>
    <button id="modal-close">Закрыть</button>
  </div>
  <iframe src="" allowfullscreen></iframe>
</div>

<script>
  const postsContainer = document.getElementById('posts-container');
  const overlay = document.getElementById('overlay');
  const modal = document.getElementById('modal');
  const iframe = modal.querySelector('iframe');
  const modalTitle = document.getElementById('modal-title');
  const modalClose = document.getElementById('modal-close');

  function openModal(post) {
    modalTitle.textContent = `Пост №${post.id}`;
    iframe.src = post.url;
    overlay.style.display = 'block';
    modal.style.display = 'flex';
  }

  function closeModal() {
    overlay.style.display = 'none';
    modal.style.display = 'none';
    iframe.src = '';
  }

  modalClose.addEventListener('click', closeModal);
  overlay.addEventListener('click', closeModal);

  // Рандомизация массива
  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  // Загрузка posts.json и рендер постов
  fetch('posts.json')
    .then(res => res.json())
    .then(data => {
      // data - объект с ключами "1", "2" и значениями-ссылками
      const posts = Object.entries(data).map(([id, url]) => ({id, url}));
      shuffle(posts);

      for (const post of posts) {
        const div = document.createElement('div');
        div.className = 'post';
        div.innerHTML = `
          <div class="post-title">Пост №${post.id}</div>
          <div style="color: var(--accent-color); font-weight: bold;">Читать</div>
        `;
        div.addEventListener('click', () => openModal(post));
        postsContainer.appendChild(div);
      }
    })
    .catch(() => {
      postsContainer.innerHTML = '<p>Ошибка загрузки постов.</p>';
    });
</script>

</body>
</html>
